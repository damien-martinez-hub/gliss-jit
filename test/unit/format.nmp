// to test it: ../../gep/gliss-disasm format.nmp

let proc="mine"

reg pc[1, card(32)] __attr(pc)

op instruction(i: ops)
	image = i.image
	syntax = i.syntax

op ops = op1 | op2 | op3

op op1(p: card(1))
	image = format("0000 000%1b", p)
	syntax = format("do %% %s", if p then "push" else "pop" endif)

op op2(v: card(1))
	image = format("1000 000%1b", v)
	syntax = format("op2 %s (%d) %s", "a", v, "b")

op op3(v : card(1))
	syntax = if v == 0 then "nop" else format("op3 %d, %s", v, "a") endif
	image = format("0100 000%1b", v)
